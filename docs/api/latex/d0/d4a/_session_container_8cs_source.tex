\doxysection{Session\+Container.\+cs}
\hypertarget{_session_container_8cs_source}{}\label{_session_container_8cs_source}\index{SessionContainer.cs@{SessionContainer.cs}}
\mbox{\hyperlink{_session_container_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00001}00001\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_s_a_p_team_1_1_kryptor_1_1_client}{SAPTeam.Kryptor.Client}}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00002}00002\ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00006}00006\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{partial\ class\ }SessionContainer}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00007}00007\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00008}00008\ \ \ \ \ \ \ \ \ readonly\ \textcolor{keywordtype}{object}\ \_addLock\ =\ \textcolor{keyword}{new}\ object();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00009}00009\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ readonly\ Dictionary<int,\ SessionHolder>\ SessionPool\ =\ \textcolor{keyword}{new}\ Dictionary<int,\ SessionHolder>();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00010}00010\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ readonly\ List<Task>\ TaskPool\ =\ \textcolor{keyword}{new}\ List<Task>();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00011}00011\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ ISession[]\ sessions;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00012}00012\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ CancellationTokenSource[]\ tokenSources;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00013}00013\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ ICollection<SessionHolder>\ holders;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00018}\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_a0b228d68a31ec04d687bacbbf5b9b798}{00018}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{interface_s_a_p_team_1_1_kryptor_1_1_client_1_1_i_session}{ISession}}[]\ \mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_a0b228d68a31ec04d687bacbbf5b9b798}{Sessions}}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00019}00019\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{get}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sessions\ ??=\ SessionPool.Values.Select(x\ =>\ x.Session).ToArray();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00024}00024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ sessions;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00025}00025\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00026}00026\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00031}\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_a4c2557208da370bac85c8703d15e11d2}{00031}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ Task[]\ Tasks\ =>\ SessionPool.Values.Select(x\ =>\ x.Task).Concat(TaskPool).Where(x\ =>\ x\ !=\ \textcolor{keyword}{null}).ToArray();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00036}\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_ae10391f1f2edd9d4279c3920002a3069}{00036}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ CancellationTokenSource[]\ \mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_ae10391f1f2edd9d4279c3920002a3069}{TokenSources}}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00037}00037\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{get}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokenSources\ ??=\ SessionPool.Values.Select(x\ =>\ x.TokenSource).ToArray();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tokenSources;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00049}\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_adb01b4072b6acec8fec21643d6ae6959}{00049}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ ICollection<SessionHolder>\ \mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_adb01b4072b6acec8fec21643d6ae6959}{Holders}}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00050}00050\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{get}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ holders\ ??=\ SessionPool.Values;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ holders;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00057}00057\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00063}\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_a4cbeb1d1dd6e6121bf45d9180cd768d0}{00063}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_a4cbeb1d1dd6e6121bf45d9180cd768d0}{Add}}(\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_holder}{SessionHolder}}\ sessionHolder)}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00064}00064\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ lock\ (\_addLock)}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ rn\ =\ SessionPool.Keys.LastOrDefault()\ +\ 1;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sessionHolder.Id\ =\ rn;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SessionPool[rn]\ =\ sessionHolder;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ResetCache();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rn;}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00072}00072\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00073}00073\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00081}\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_a6b23554bd5af272950bac79c79752af1}{00081}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_a6b23554bd5af272950bac79c79752af1}{AddMonitoringTask}}(Task\ task)}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00082}00082\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ lock\ (\_addLock)}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TaskPool.Add(task);}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ResetCache();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00088}00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00096}\mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_ab64620e56b7173a35ede386fb0b92b65}{00096}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_s_a_p_team_1_1_kryptor_1_1_client_1_1_session_container_ab64620e56b7173a35ede386fb0b92b65}{Remove}}(\textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id})}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00097}00097\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ SessionPool.Remove(\textcolor{keywordtype}{id});}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ ResetCache();}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00100}00100\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00101}00101\ }
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keywordtype}{void}\ ResetCache()}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00103}00103\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ sessions\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ tokenSources\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ holders\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00107}00107\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00108}00108\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_session_container_8cs_source_l00109}00109\ \}}

\end{DoxyCode}
